{{ if eq .chezmoi.os "windows" }}
# oh-my-posh config
oh-my-posh init pwsh --config "C:\Users\Nathan Darker\AppData\Local\Programs\oh-my-posh\themes\powerlevel10k_rainbow_ND.omp.json" | Invoke-Expression

# Imports Terminal-Icons module
Import-Module -Name Terminal-Icons

# Set PSReadLine options
Set-PSReadLineOption -BellStyle None
Set-PSReadLineOption -PredictionSource History
Set-PSReadLineOption -EditMode Windows

# Enhanced PSReadLine settings
Set-PSReadLineOption -PredictionViewStyle ListView
Set-PSReadLineOption -Colors @{
    "Command" = [ConsoleColor]::Green
    "Parameter" = [ConsoleColor]::Cyan
    "String" = [ConsoleColor]::Yellow
    "Operator" = [ConsoleColor]::DarkGray
}
Set-PSReadLineKeyHandler -Key Tab -Function MenuComplete
Set-PSReadLineKeyHandler -Key Ctrl+d -Function DeleteCharOrExit

# Aliases
Set-Alias ll Get-ChildItem
Set-Alias la 'Get-ChildItem -Force'
Set-Alias cat Get-Content

# Functions

# Opens a new PowerShell session in your chezmoi source directory
# Equivalent to `chezmoi cd`, but runs in PowerShell instead of CMD
function chezcd {
    pwsh -NoExit -Command "Set-Location '$(chezmoi source-path)'"
}

# --- Default text editor configuration ---
$env:EDITOR = "C:\WINDOWS\system32\edit.exe"
$env:VISUAL = $env:EDITOR

# Helper function to edit files quickly
function edit-file {
    param(
        [Parameter(Mandatory, Position=0)]
        [string]$Path
    )
    & $env:EDITOR $Path
}

Set-Alias editf edit-file


{{ end }}
